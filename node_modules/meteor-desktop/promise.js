const shell = require('shelljs');

function run() {

    shell.exec('adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings');
    setTimeout(() => {
        shell.exec('adb shell input keyevent 22');
        shell.exec('adb shell input keyevent 23');
    }, 3000);
    setTimeout(() => {
        shell.exec('adb shell input keyevent 3');
    }, 6000);
    setTimeout(() => {
        shell.exec('adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings');
    }, 20000);
    setTimeout(() => {
        shell.exec('adb shell input keyevent 19');
        shell.exec('adb shell input keyevent 23');
    }, 23000);
    setTimeout(() => {
        shell.exec('adb shell input keyevent 3');
    }, 26000);
}

shell.exec('adb shell stop');
shell.exec('adb shell setprop libc.debug.malloc 1');
shell.exec('adb shell start');

setInterval(() => {
    run();
}, 40000);

run();
